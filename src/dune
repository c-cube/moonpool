(library
 (public_name moonpool)
 (name moonpool)
 (private_modules atomic_ domain_)
 (libraries threads either))

(rule
  (targets atomic_.ml)
  (action
    (with-stdout-to %{targets}
     (run ./gen/gen.exe --ocaml %{ocaml_version} --atomic))))
          
(rule
  (targets domain_.ml)
  (action
    (with-stdout-to %{targets}
     (run ./gen/gen.exe --ocaml %{ocaml_version} --domain))))
          
